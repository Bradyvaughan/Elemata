<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel='stylesheet' href='master.css' type='text/css'>
    <script src="./bundle.js"></script>
    <title></title>
    <script src="https://use.fontawesome.com/3d9a713f41.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  </head>
  <body onload="init();" id="root">
    <div class="header">
      <div>
        <div class="control">
          <button id="start">Start</button>
          <button id="stop">Stop</button>
          <button id="step">Step</button>
          <button id="reset">Reset</button>
          <button id="instructions">Instructions</button>
        </div>
        <div class='slider'>
          Speed:
          <input id='slider' min='1' max='50' step='1' value='1' type="range">
        </div>
      </div>

      <div class="display">
        <section class="flex">
          <section class="drop-down">
            <button>Select Rule</button>
            <ul class="menu">
              <li id="Rule30">Rule 30</li>
              <li id="Rule90">Rule 90</li>
              <li id="Rule110">Rule 110</li>
              <li id="Rule184">Rule 184</li>
            </ul>
          </section>
          <button id='custom'>Custom Rule</button>
        </section>
        <div class="diagnostics">
          <p id="counter">Current Generation: 0</p>
        </div>
      </div>
    </div>

    <div class="body">
      <h1>The Automaton!</h1>
      <ul class="grid"></ul>
    </div>

    <div class='right'>
      <button id="rainbow">Rainbow Mode</button>
      <button id='all-black'>All Black</button>
      <button id='random'>Random Row</button>
    </div>

    <section class='sidebar'>
      <ul>
        <li>Current Rule:</li>
        <li>
          <p class="cell"></p>
          <p class="cell"></p>
          <p class="cell patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id="000"></p>
        </li>

        <li>
          <p class="cell black"></p>
          <p class="cell"></p>
          <p class="cell patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id="100"></p>
        </li>

        <li>
          <p class="cell"></p>
          <p class="cell black"></p>
          <p class="cell patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id="010"></p>
        </li>

        <li>
          <p class="cell"></p>
          <p class="cell"></p>
          <p class="cell black patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id="001"></p>
        </li>

        <li>
          <p class="cell black"></p>
          <p class="cell black"></p>
          <p class="cell patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id='110'></p>
        </li>

        <li>
          <p class="cell black"></p>
          <p class="cell"></p>
          <p class="cell black patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id='101'></p>
        </li>

        <li>
          <p class="cell"></p>
          <p class="cell black"></p>
          <p class="cell black patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id='011'></p>
        </li>

        <li>
          <p class="cell black"></p>
          <p class="cell black"></p>
          <p class="cell black patch"></p>
          <i class="fa fa-arrow-right" aria-hidden="true"></i>
          <p class="cell patch" id='111'></p>
        </li>
      </ul>
    </section>


    <div id="structions" class="hidden">
      <div>
        <p>
          Welcome to Elemata, the simple cellular automaton visualizer.
          This project explores elementary cellular automata.  In an elementary
          cellular automaton, there is a line of cells, each of which may be on
          or off, here represented by black or white.  Each generation of the automaton is calculated
          deterministically from the arrangement of the previous generation.
          That is, there is a transition function for each cell which maps the
          old state of the cell and each of its neighbors to a new state.
          Because there are 8 possible arrangements of three cells,
          (000, 100, 010, ..etc) and each of them may map to one of two states,
          there are 2^8 or 256 possible elementary transition rules for you to
          explore!
        </p>
        <p>
          Some of the more interesting elementary automata come preprogrammed
          in a menu to the right.  To run one, simply select a rule from the
          dropdown, select some squares to start off as 'on' by clicking on them,
          and press the start button.  Once started, each successive generation
          of the automaton will be appended to the bottom of the grid so you can
          watch the system evolve over time.  At any time you may also pause the
          system, reset it, or step through it a single generation at a time by
          using the corresponding buttons.
        </p>
        <p>
          Once you feel comfortable using the presets, you can program your very
          own automata by using the "custom" menu.  The custom menu will show
          you the eight possible configurations for a cell and its neighbors,
          you will be able to select which you'd like to map to 'on' cells, and
          which you'd like to map to 'off' cells.  In this way, you can discover
          any of the 256 elementary automata.
        </p>
        <p>
          Well?  What are you waiting for?  Get started!
        </p>
        <button id="close">Okay, Thanks!</button>
      </div>
    </div>

    <div id="cycle-modal" class="hidden">
      <div>
        <h1>You've Seen It All</h1>
        <p>The automaton has hit a cycle.
          If allowed to continue, it will repeat the same pattern forever.
          The system went through <span id='cycle-time'></span> generations before
          entering the cycle, and the cycle has a period of
          <span id='period'></span>.
          </p>
        <button id="cycle-close">Okay</button>
        <button id='cycle-info'>More Info</button>
      </div>
    </div>

    <div id='cycle-info-modal' class="hidden">
      <div>
        <h1>Cycles</h1>
        <p>
          Cellular automata are deterministic, which means that they have no
          random components: the same automaton will behave the same way no
          matter how many times it is run.  They are also memoryless, meaning
          that the behavior depends only on the current state, and not at all on
          how it got to that state.
        </p>
        <p>
          Together, these two properties mean that the future behavior of the
          automaton is completely determined by the current state.  Thus, if
          the current state of the automaton is the same as a state that it has
          held previously, the automaton will repeat the same
          actions, which will lead it back to that state again, to
          repeat those actions forever.
        </p>
        <p>
          The entire repeating behavior is highlighted in light gray, while the
          two matching lines are highlighted in slightly darker gray.  Every single
          other line is unique.
        </p>
        <button id='info-close'></button>
      </div>
    </div>

    <div id='custom-rule' class='hidden'>
      <div>

        <p>
          Select which configurations you would like to map to 'on' states by
          toggling the lower squares
        </p>

        <section class='custom-body'>

          <li>
            <section class="cell-row">
              <p class="cell"></p>
              <p class="cell"></p>
              <p class="cell patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-000"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell black"></p>
              <p class="cell"></p>
              <p class="cell patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-100"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell"></p>
              <p class="cell black"></p>
              <p class="cell patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-010"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell"></p>
              <p class="cell"></p>
              <p class="cell black patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-001"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell black"></p>
              <p class="cell black"></p>
              <p class="cell patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-110"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell black"></p>
              <p class="cell"></p>
              <p class="cell black patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-101"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell"></p>
              <p class="cell black"></p>
              <p class="cell black patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-011"></p>
          </li>

          <li>
            <section class="cell-row">
              <p class="cell black"></p>
              <p class="cell black"></p>
              <p class="cell black patch"></p>
            </section>
            <i class="fa fa-arrow-down" aria-hidden="true"></i>
            <p class="cell patch" id="custom-111"></p>
          </li>

        </section>
        <ul class='controls'>
          <button id='create-custom'>Create Automaton!</button>
          <button id="cancel">Cancel</button>
        </ul>
      </div>
    </div>
  </body>
</html>
